<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡¶™‡ßç‡¶∞‡¶∂‡¶æ‡¶∏‡¶ï ‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶° - ‡¶®‡¶ø‡¶∞‡¶æ‡¶™‡¶¶ ‡¶≠‡ßã‡¶ü</title>
    <link rel="stylesheet" href="assets/css/common.css">
    <link rel="stylesheet" href="assets/css/admin.css">
    <link rel="stylesheet" href="assets/css/admin_to_citizen.css">
    <link rel="stylesheet" href="assets/css/admin_admin_chat.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
</head>
<body>

    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>

    <header class="header">
        <div class="header-content">
            <img src="assets/images/election_comission_logo-removebg-preview.png" alt="‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂ ‡¶∏‡¶∞‡¶ï‡¶æ‡¶∞" class="logo">
            <div class="header-title">
                <h1 style="color: #1e7e34; font-size: 1.6rem;">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶Æ‡¶ø‡¶∂‡¶®</h1>
                <p style="color: #d32f2f;">Bangladesh Election Commission</p>
            </div>
            <div class="header-actions">
                <button class="btn btn-secondary btn-sm" onclick="logout()">‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü</button>
    
            </div>
        </div>
    </header>

    <div class="admin-layout">
        <aside class="sidebar">
            <nav class="sidebar-nav">
                <a href="#" class="nav-item active" onclick="showSection('dashboard')">
                    <span class="nav-icon">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/>
                        </svg>
                    </span>
                    <span class="nav-text">‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶°</span>
                </a>
                <a href="#" class="nav-item" onclick="showSection('ballot')">
                    <span class="nav-icon">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                        </svg>
                    </span>
                    <span class="nav-text">‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡¶ü ‡¶§‡ßà‡¶∞‡¶ø</span>
                </a>
                <a href="#" class="nav-item" onclick="showSection('candidates')">
                    <span class="nav-icon">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/>
                        </svg>
                    </span>
                    <span class="nav-text">‡¶™‡ßç‡¶∞‡¶æ‡¶∞‡ßç‡¶•‡ßÄ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ</span>
                </a>
                <a href="#" class="nav-item" onclick="showSection('notice')">
                    <span class="nav-icon">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5v6z"/>
                        </svg>
                    </span>
                    <span class="nav-text">‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶™‡ßç‡¶∞‡¶ï‡¶æ‡¶∂</span>
                </a>
                <a href="#" class="nav-item" onclick="showSection('results')">
                    <span class="nav-icon">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"/>
                        </svg>
                    </span>
                    <span class="nav-text">‡¶´‡¶≤‡¶æ‡¶´‡¶≤ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶™‡¶®‡¶æ</span>
                </a>
                <a href="#" class="nav-item" onclick="showSection('complaints')">
                    <span class="nav-icon">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
                        </svg>
                    </span>
                    <span class="nav-text">‡¶Ö‡¶≠‡¶ø‡¶Ø‡ßã‡¶ó ‡¶¨‡ßç‡¶Ø‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶™‡¶®‡¶æ</span>
                </a>
                <a href="#" class="nav-item" id="chat-menu-item" onclick="showSection('chat')" style="display: none;">
                    <span class="nav-icon">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"/>
                        </svg>
                    </span>
                    <span class="nav-text">‡¶®‡¶æ‡¶ó‡¶∞‡¶ø‡¶ï ‡¶ö‡ßç‡¶Ø‡¶æ‡¶ü</span>
                </a>
                <a href="#" class="nav-item" onclick="showSection('admin-chat')">
                    <span class="nav-icon">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/>
                        </svg>
                    </span>
                    <span class="nav-text">‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶® ‡¶ö‡ßç‡¶Ø‡¶æ‡¶ü</span>
                </a>
                <a href="#" class="nav-item" onclick="showSection('settings')">
                    <span class="nav-icon">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/>
                        </svg>
                    </span>
                    <span class="nav-text">‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏</span>
                </a>
            </nav>
        </aside>

        <main class="main-content">
        
            <section id="dashboard-section" class="content-section active">
                <div class="section-header">
                    <h2>‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶°</h2>
                    <p>‡¶∏‡¶æ‡¶∞‡ßç‡¶¨‡¶ø‡¶ï ‡¶™‡¶∞‡¶ø‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ‡¶® ‡¶ì ‡¶ï‡¶æ‡¶∞‡ßç‡¶Ø‡¶ï‡ßç‡¶∞‡¶Æ</p>
                </div>

                <div class="stats-grid">
                    <div class="stat-card card">
                        <div class="stat-icon" style="background: #e3f2fd;">
                            <svg viewBox="0 0 24 24" fill="#1976d2" width="28" height="28">
                                <path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/>
                            </svg>
                        </div>
                        <div class="stat-info">
                            <h3>‡¶Æ‡ßã‡¶ü ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡¶ü</h3>
                            <p class="stat-number" id="total-ballots">...</p>
                        </div>
                    </div>
                    <div class="stat-card card">
                        <div class="stat-icon" style="background: #e8f5e9;">
                            <svg viewBox="0 0 24 24" fill="#2e7d32" width="28" height="28">
                                <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                            </svg>
                        </div>
                        <div class="stat-info">
                            <h3>‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º ‡¶≠‡ßã‡¶ü</h3>
                            <p class="stat-number" id="active-votes">...</p>
                        </div>
                    </div>
                    <div class="stat-card card">
                        <div class="stat-icon" style="background: #fff3e0;">
                            <svg viewBox="0 0 24 24" fill="#f57c00" width="28" height="28">
                                <path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/>
                            </svg>
                        </div>
                        <div class="stat-info">
                            <h3>‡¶Æ‡ßã‡¶ü ‡¶≠‡ßã‡¶ü‡¶æ‡¶∞</h3>
                            <p class="stat-number" id="total-voters">...</p>
                        </div>
                    </div>
                    <div class="stat-card card">
                        <div class="stat-icon" style="background: #f3e5f5;">
                            <svg viewBox="0 0 24 24" fill="#7b1fa2" width="28" height="28">
                                <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                            </svg>
                        </div>
                        <div class="stat-info">
                            <h3>‡¶™‡ßç‡¶∞‡¶¶‡¶§‡ßç‡¶§ ‡¶≠‡ßã‡¶ü</h3>
                            <p class="stat-number" id="votes-cast">...</p>
                        </div>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <div class="card">
                        <h3>
                            <svg viewBox="0 0 24 24" fill="#f44336" width="20" height="20" style="vertical-align: middle; margin-right: 8px;">
                                <circle cx="12" cy="12" r="8"/>
                            </svg>
                            ‡¶≤‡¶æ‡¶á‡¶≠ ‡¶≠‡ßã‡¶ü‡¶ø‡¶Ç ‡¶™‡¶∞‡¶ø‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ‡¶®
                        </h3>
                        <div class="live-stats" id="live-stats-container">
                            <!-- Live stats will be loaded here -->
                        </div>
                    </div>

                    <div class="card">
                        <h3>‚è∞ ‡¶∏‡¶æ‡¶Æ‡ßç‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ï ‡¶ï‡¶æ‡¶∞‡ßç‡¶Ø‡¶ï‡ßç‡¶∞‡¶Æ</h3>
                        <div class="activity-list" id="activity-list-container">
                            <!-- Activity list will be loaded here -->
                        </div>
                    </div>
                </div>

                <div class="chart-grid">
                    <div class="card">
                        <div class="result-chart-header">
                            <h3>‡¶´‡¶≤‡¶æ‡¶´‡¶≤‡ßá‡¶∞ ‡¶∏‡¶æ‡¶∞‡¶æ‡¶Ç‡¶∂</h3>
                            <select id="resultBallotSelect" class="result-ballot-dropdown">
                                <option value="">‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡¶ü ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</option>
                            </select>
                        </div>
                        <canvas id="resultChart" height="220"></canvas>
                    </div>
                </div>
            </section>


            <section id="ballot-section" class="content-section">
                <div class="section-header">
                    <h2>‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡¶ü ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®</h2>
                    <p>‡¶®‡¶§‡ßÅ‡¶® ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶®‡ßÄ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡¶ü ‡¶§‡ßà‡¶∞‡¶ø ‡¶ì ‡¶™‡¶∞‡¶ø‡¶ö‡¶æ‡¶≤‡¶®‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®</p>
                </div>

                <!-- Add New Ballot Type and Location Section -->
                <div class="card">
                    <h3>‡¶®‡¶§‡ßÅ‡¶® ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡¶ü‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶ì ‡¶è‡¶≤‡¶æ‡¶ï‡¶æ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="newBallotName">‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡¶ü‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶® *</label>
                            <input type="text" id="newBallotName" placeholder="‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶ú‡¶æ‡¶§‡ßÄ‡¶Ø‡¶º ‡¶∏‡¶Ç‡¶∏‡¶¶ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡ß®‡ß¶‡ß®‡ß´" class="input-field">
                        </div>
                        <div class="form-group">
                            <label for="newBallotLocation">‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶è‡¶≤‡¶æ‡¶ï‡¶æ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶® *</label>
                            <input type="text" id="newBallotLocation" placeholder="‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶¢‡¶æ‡¶ï‡¶æ-‡ßß‡ß¶" class="input-field">
                        </div>
                    </div>
                    <div style="text-align: right;">
                        <button type="button" class="btn btn-success" onclick="addNewBallotOption()">+ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</button>
                    </div>
                </div>



                <div class="card" id="ballotFormCard">
                    <h3>‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡¶ü ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®</h3>
                    <p style="color: #666; font-size: 0.9rem; margin-bottom: 15px;">
                        <strong>‡¶∏‡ßÅ‡¶™‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶®:</strong> ‡¶°‡ßç‡¶∞‡¶™‡¶°‡¶æ‡¶â‡¶®‡ßá ‡¶∞‡¶æ‡¶á‡¶ü-‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßá ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡¶ü/‡¶è‡¶≤‡¶æ‡¶ï‡¶æ ‡¶Æ‡ßÅ‡¶õ‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®
                    </p>
                    <form id="ballotForm" class="ballot-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="ballotName">‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡¶ü‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ *</label>
                                <select id="ballotName" required></select>
                            </div>
                            <div class="form-group">
                                <label for="ballotLocation">‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶è‡¶≤‡¶æ‡¶ï‡¶æ *</label>
                                <select id="ballotLocation" required></select>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="startDate">‡¶∂‡ßÅ‡¶∞‡ßÅ‡¶∞ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ ‡¶ì ‡¶∏‡¶Æ‡¶Ø‡¶º *</label>
                                <input type="datetime-local" id="startDate" required>
                            </div>
                            <div class="form-group">
                                <label for="endDate">‡¶∂‡ßá‡¶∑ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ ‡¶ì ‡¶∏‡¶Æ‡¶Ø‡¶º *</label>
                                <input type="datetime-local" id="endDate" required>
                            </div>
                        </div>

                        

                        <div class="candidates-section">
                            <h3>‡¶™‡ßç‡¶∞‡¶æ‡¶∞‡ßç‡¶•‡ßÄ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</h3>
                            <div id="candidatesList"></div>
                            <button type="button" class="btn btn-secondary" onclick="addCandidate()">
                                + ‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡ßç‡¶∞‡¶æ‡¶∞‡ßç‡¶•‡ßÄ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®
                            </button>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡¶ü ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
                            
                            <button type="reset" class="btn btn-danger">‡¶∞‡¶ø‡¶∏‡ßá‡¶ü</button>
                        </div>
                    </form>
                </div>
            </section>

            
            <section id="candidates-section" class="content-section">
                <div class="section-header">
                    <h2>‡¶™‡ßç‡¶∞‡¶æ‡¶∞‡ßç‡¶•‡ßÄ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ</h2>
                    <p>‡¶∏‡¶ï‡¶≤ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶®‡ßÄ ‡¶™‡ßç‡¶∞‡¶æ‡¶∞‡ßç‡¶•‡ßÄ‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø</p>
                </div>

                <div class="card">
                    <div class="table-responsive">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>‡¶õ‡¶¨‡¶ø</th>
                                    <th>‡¶®‡¶æ‡¶Æ</th>
                                    <th>‡¶¶‡¶≤</th>
                                    <th>‡¶™‡ßç‡¶∞‡¶§‡ßÄ‡¶ï</th>
                                    <th>‡¶è‡¶≤‡¶æ‡¶ï‡¶æ</th>
                                    <th>‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ</th>
                                    <th>‡¶™‡¶¶‡¶ï‡ßç‡¶∑‡ßá‡¶™</th>
                                </tr>
                            </thead>
                            <tbody id="candidatesTableBody">
                                <!-- Candidates will be loaded here dynamically -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            
            <section id="notice-section" class="content-section">
                <div class="section-header">
                    <h2>‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶™‡ßç‡¶∞‡¶ï‡¶æ‡¶∂</h2>
                    <p>‡¶®‡¶æ‡¶ó‡¶∞‡¶ø‡¶ï‡¶¶‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ó‡ßÅ‡¶∞‡ßÅ‡¶§‡ßç‡¶¨‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶™‡ßç‡¶∞‡¶ï‡¶æ‡¶∂ ‡¶ï‡¶∞‡ßÅ‡¶®</p>
                </div>

                <div class="card">
                    <form id="noticeForm">
                        <div class="form-group">
                            <label for="noticeTitle">‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶∂‡¶ø‡¶∞‡ßã‡¶®‡¶æ‡¶Æ *</label>
                            <input type="text" id="noticeTitle" placeholder="‡¶®‡ßã‡¶ü‡¶ø‡¶∂‡ßá‡¶∞ ‡¶∂‡¶ø‡¶∞‡ßã‡¶®‡¶æ‡¶Æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®" required>
                        </div>

                        <div class="form-group">
                            <label for="noticeType">‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶ß‡¶∞‡¶® *</label>
                            <select id="noticeType" required>
                                <option value="">‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</option>
                                <option value="‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£">‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£</option>
                                <option value="‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø">‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø</option>
                                <option value="‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶∏‡¶Ç‡¶ï‡ßç‡¶∞‡¶æ‡¶®‡ßç‡¶§">‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶∏‡¶Ç‡¶ï‡ßç‡¶∞‡¶æ‡¶®‡ßç‡¶§</option>
                                <option value="‡¶™‡ßç‡¶∞‡¶æ‡¶∞‡ßç‡¶•‡ßÄ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ">‡¶™‡ßç‡¶∞‡¶æ‡¶∞‡ßç‡¶•‡ßÄ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ</option>
                                <option value="‡¶´‡¶≤‡¶æ‡¶´‡¶≤">‡¶´‡¶≤‡¶æ‡¶´‡¶≤</option>
                                <option value="‡¶∏‡¶§‡¶∞‡ßç‡¶ï‡¶§‡¶æ">‡¶∏‡¶§‡¶∞‡ßç‡¶ï‡¶§‡¶æ</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="noticeMessage">‡¶¨‡¶æ‡¶∞‡ßç‡¶§‡¶æ</label>
                            <textarea id="noticeMessage" rows="6" placeholder="‡¶®‡ßã‡¶ü‡¶ø‡¶∂‡ßá‡¶∞ ‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®..."></textarea>
                            <small class="form-text">‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶¨‡¶æ‡¶∞‡ßç‡¶§‡¶æ, ‡¶∂‡ßÅ‡¶ß‡ßÅ PDF ‡¶Ö‡¶•‡¶¨‡¶æ ‡¶â‡¶≠‡¶Ø‡¶º‡¶á ‡¶™‡ßç‡¶∞‡¶¶‡¶æ‡¶® ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®</small>
                        </div>

                        <div class="form-group">
                            <label for="noticePdf">PDF ‡¶´‡¶æ‡¶á‡¶≤ ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®</label>
                            <input type="file" id="noticePdf" accept=".pdf">
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶™‡ßç‡¶∞‡¶ï‡¶æ‡¶∂ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
                            <button type="reset" class="btn btn-secondary">‡¶∞‡¶ø‡¶∏‡ßá‡¶ü</button>
                        </div>
                    </form>
                </div>

                <div class="card mt-20">
                    <h3>‡¶™‡ßç‡¶∞‡¶ï‡¶æ‡¶∂‡¶ø‡¶§ ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶∏‡¶Æ‡ßÇ‡¶π</h3>
                    <div class="notice-list">
                        <div class="notice-item">
                            <div class="notice-header">
                                <h4>‡¶≠‡ßã‡¶ü‡¶ø‡¶Ç ‡¶∏‡¶Æ‡¶Ø‡¶º‡¶∏‡ßÇ‡¶ö‡ßÄ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®</h4>
                                <span class="badge badge-urgent">‡¶ú‡¶∞‡ßÅ‡¶∞‡ßÄ</span>
                            </div>
                            <p class="notice-date">‡¶™‡ßç‡¶∞‡¶ï‡¶æ‡¶∂‡¶ø‡¶§: ‡ß© ‡¶°‡¶ø‡¶∏‡ßá‡¶Æ‡ßç‡¶¨‡¶∞ ‡ß®‡ß¶‡ß®‡ß´, ‡ßß‡ß¶:‡ß©‡ß¶ AM</p>
                            <p class="notice-preview">‡¶Ü‡¶ó‡¶æ‡¶Æ‡ßÄ‡¶ï‡¶æ‡¶≤ ‡¶≠‡ßã‡¶ü‡¶ø‡¶Ç ‡¶∏‡¶Æ‡¶Ø‡¶º ‡ßÆ‡¶ü‡¶æ ‡¶•‡ßá‡¶ï‡ßá ‡ß¨‡¶ü‡¶æ ‡¶™‡¶∞‡ßç‡¶Ø‡¶®‡ßç‡¶§ ‡¶¨‡¶∞‡ßç‡¶ß‡¶ø‡¶§ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá...</p>
                            <div class="notice-actions">
                                <button class="btn btn-sm btn-secondary">‡¶∏‡¶Æ‡ßç‡¶™‡¶æ‡¶¶‡¶®‡¶æ</button>
                                <button class="btn btn-sm btn-danger">‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡ßÅ‡¶®</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <section id="results-section" class="content-section">
                <div class="section-header">
                    <h2>‡¶´‡¶≤‡¶æ‡¶´‡¶≤ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶™‡¶®‡¶æ</h2>
                    <p>‡¶≠‡ßã‡¶ü‡ßá‡¶∞ ‡¶´‡¶≤‡¶æ‡¶´‡¶≤ ‡¶ó‡¶£‡¶®‡¶æ ‡¶ì ‡¶™‡ßç‡¶∞‡¶ï‡¶æ‡¶∂</p>
                </div>

                <div class="card">
                    <div class="form-group">
                        <label for="selectBallot">‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡¶ü ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</label>
                        <select id="selectBallot">
                            <option value="">‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡¶ü ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</option>
                        </select>
                    </div>

                    <div class="results-summary">
                        <p style="text-align: center; color: #999; padding: 40px;">‡¶è‡¶ï‡¶ü‡¶ø ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡¶ü ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶´‡¶≤‡¶æ‡¶´‡¶≤ ‡¶¶‡ßá‡¶ñ‡¶§‡ßá</p>
                    </div>

                    <div class="form-actions">
                        <button class="btn btn-primary" onclick="calculateResults()">‡¶´‡¶≤‡¶æ‡¶´‡¶≤ ‡¶™‡ßÅ‡¶®‡¶∞‡ßç‡¶ó‡¶£‡¶®‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
                    </div>
                </div>
            </section>

            <section id="complaints-section" class="content-section">
                <div class="section-header">
                    <h2>‡¶Ö‡¶≠‡¶ø‡¶Ø‡ßã‡¶ó ‡¶¨‡ßç‡¶Ø‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶™‡¶®‡¶æ</h2>
                    <p>‡¶®‡¶æ‡¶ó‡¶∞‡¶ø‡¶ï‡¶¶‡ßá‡¶∞ ‡¶Ö‡¶≠‡¶ø‡¶Ø‡ßã‡¶ó ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶® ‡¶ì ‡¶∏‡¶Æ‡¶æ‡¶ß‡¶æ‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</p>
                    <p style="color: #4caf50; font-size: 13px; margin-top: 5px;">
                        <svg viewBox="0 0 24 24" fill="currentColor" style="width: 14px; height: 14px; vertical-align: middle; margin-right: 4px;">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                        </svg>
                        ‡¶∏‡ßç‡¶¨‡¶Ø‡¶º‡¶Ç‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ö‡¶æ‡¶≤‡ßÅ ‡¶Ü‡¶õ‡ßá (‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡ßß‡ß´ ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶°‡ßá)
                    </p>
                </div>

                <div class="stats-container" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px;">
                    <div class="stat-card" style="background: linear-gradient(135deg, #ff9800, #f57c00); color: white;">
                        <div class="stat-value" id="totalComplaints">0</div>
                        <div class="stat-label">‡¶Æ‡ßã‡¶ü ‡¶Ö‡¶≠‡¶ø‡¶Ø‡ßã‡¶ó</div>
                    </div>
                    <div class="stat-card" style="background: linear-gradient(135deg, #ffc107, #ff9800); color: white;">
                        <div class="stat-value" id="processingComplaints">0</div>
                        <div class="stat-label">‡¶™‡ßç‡¶∞‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶ß‡ßÄ‡¶®</div>
                    </div>
                    <div class="stat-card" style="background: linear-gradient(135deg, #2196f3, #1976d2); color: white;">
                        <div class="stat-value" id="answeredComplaints">0</div>
                        <div class="stat-label">‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶™‡ßç‡¶∞‡¶¶‡¶æ‡¶®</div>
                    </div>
                    <div class="stat-card" style="background: linear-gradient(135deg, #4caf50, #388e3c); color: white;">
                        <div class="stat-value" id="resolvedComplaints">0</div>
                        <div class="stat-label">‡¶∏‡¶Æ‡¶æ‡¶ß‡¶æ‡¶®‡¶ï‡ßÉ‡¶§</div>
                    </div>
                </div>

                <div class="card">
                    <div class="filters-bar" style="display: flex; gap: 15px; margin-bottom: 20px; flex-wrap: wrap;">
                        <select id="statusFilter" class="input-field" style="flex: 1; min-width: 150px;" onchange="filterComplaints()">
                            <option value="">‡¶∏‡¶ï‡¶≤ ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏</option>
                            <option value="‡¶™‡ßç‡¶∞‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶ß‡ßÄ‡¶®">‡¶™‡ßç‡¶∞‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶ß‡ßÄ‡¶®</option>
                            <option value="‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶™‡ßç‡¶∞‡¶¶‡¶æ‡¶®">‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶™‡ßç‡¶∞‡¶¶‡¶æ‡¶®</option>
                            <option value="‡¶∏‡¶Æ‡¶æ‡¶ß‡¶æ‡¶®‡¶ï‡ßÉ‡¶§">‡¶∏‡¶Æ‡¶æ‡¶ß‡¶æ‡¶®‡¶ï‡ßÉ‡¶§</option>
                            <option value="‡¶™‡ßç‡¶∞‡¶§‡ßç‡¶Ø‡¶æ‡¶ñ‡ßç‡¶Ø‡¶æ‡¶§">‡¶™‡ßç‡¶∞‡¶§‡ßç‡¶Ø‡¶æ‡¶ñ‡ßç‡¶Ø‡¶æ‡¶§</option>
                        </select>
                        <select id="priorityFilter" class="input-field" style="flex: 1; min-width: 150px;" onchange="filterComplaints()">
                            <option value="">‡¶∏‡¶ï‡¶≤ ‡¶™‡ßç‡¶∞‡¶æ‡¶Ø‡¶º‡ßã‡¶∞‡¶ø‡¶ü‡¶ø</option>
                            <option value="‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£">‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£</option>
                            <option value="‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø">‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø</option>
                            <option value="‡¶Ö‡¶§‡ßç‡¶Ø‡¶®‡ßç‡¶§ ‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø">‡¶Ö‡¶§‡ßç‡¶Ø‡¶®‡ßç‡¶§ ‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø</option>
                        </select>
                        <input type="text" id="searchFilter" class="input-field" placeholder="‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßÅ‡¶®..." style="flex: 1; min-width: 200px;" oninput="filterComplaints()">
                        <button class="btn btn-primary" onclick="loadAllComplaints()">‡¶∞‡¶ø‡¶´‡ßç‡¶∞‡ßá‡¶∂</button>
                    </div>

                    <div class="complaints-list" id="complaints-list-container">
                        <div style="text-align: center; padding: 40px; color: #666;">
                            <p>‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Admin Complaint Response Modal -->
            <div id="adminComplaintModal" class="modal" style="display: none;">
                <div class="modal-content" style="max-width: 800px;">
                    <div class="modal-header">
                        <h2>‡¶Ö‡¶≠‡¶ø‡¶Ø‡ßã‡¶ó‡ßá‡¶∞ ‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§ ‡¶ì ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ</h2>
                        <span class="close-modal" onclick="closeAdminComplaintModal()">&times;</span>
                    </div>
                    <div class="modal-body" id="adminComplaintModalBody">
                        <!-- Content will be loaded dynamically -->
                    </div>
                </div>
            </div>

    <section id="chat-section" class="content-section">
        <div class="section-header">  
            <h1>üèõÔ∏è Admin Chat Panel</h1>
            <p>‡¶®‡¶æ‡¶ó‡¶∞‡¶ø‡¶ï‡¶¶‡ßá‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶∏‡¶∞‡¶æ‡¶∏‡¶∞‡¶ø ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</p>
        </div>

        <div class="chat-container">
            <!-- Chat List -->
            <div class="chat-list">
                <div class="chat-list-header">
                    <h3>‡¶®‡¶æ‡¶ó‡¶∞‡¶ø‡¶ï ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ</h3>
                    <span id="citizenCount" class="count-badge">0</span>
                </div>

                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="üîç ‡¶®‡¶æ‡¶Æ ‡¶¨‡¶æ NID ‡¶¶‡¶ø‡¶Ø‡¶º‡ßá ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßÅ‡¶®...">
                </div>

                <div id="chatListContainer">
                    <div class="chat-empty-state">
                        <svg fill="currentColor" viewBox="0 0 24 24">
                            <path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"/>
                        </svg>
                        <h3>‡¶ï‡ßã‡¶® ‡¶®‡¶æ‡¶ó‡¶∞‡¶ø‡¶ï ‡¶®‡ßá‡¶á</h3>
                        <p>‡¶®‡¶æ‡¶ó‡¶∞‡¶ø‡¶ï‡¶∞‡¶æ ‡¶Ø‡ßã‡¶ó ‡¶¶‡¶ø‡¶≤‡ßá ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶¶‡ßá‡¶ñ‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá</p>
                    </div>
                </div>
            </div>

            <!-- Chat Window -->
            <div class="chat-window">
                <div class="chat-header">
                    <div class="chat-header-info">
                        <h3 id="chatHeaderName">‡¶®‡¶æ‡¶ó‡¶∞‡¶ø‡¶ï ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</h3>
                        <div class="chat-header-nid" id="chatHeaderNID"></div>
                    </div>
                    <span class="chat-status" id="chatStatus" style="display: none;">‡¶Ö‡¶®‡¶≤‡¶æ‡¶á‡¶®</span>
                </div>

                <div class="chat-messages" id="chatMessagesContainer">
                    <div class="chat-empty-state">
                        <svg fill="currentColor" viewBox="0 0 24 24">
                            <path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 9h12v2H6V9zm8 5H6v-2h8v2zm4-6H6V6h12v2z"/>
                        </svg>
                        <h3>‡¶ï‡¶•‡ßã‡¶™‡¶ï‡¶•‡¶® ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®</h3>
                        <p>‡¶¨‡¶æ‡¶Æ‡¶¶‡¶ø‡¶ï ‡¶•‡ßá‡¶ï‡ßá ‡¶è‡¶ï‡¶ú‡¶® ‡¶®‡¶æ‡¶ó‡¶∞‡¶ø‡¶ï ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</p>
                    </div>
                </div>

                <div class="chat-input" style="position: relative;">
                    <!-- Reply Preview -->
                    <div id="adminReplyPreview" class="reply-preview" style="display: none; position: absolute; top: -60px; left: 14px; right: 14px;">
                        <div class="reply-preview-content">
                            <div class="reply-preview-label">‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶¶‡¶ø‡¶ö‡ßç‡¶õ‡ßá‡¶®</div>
                            <div class="reply-preview-text" id="adminReplyPreviewText"></div>
                        </div>
                        <button type="button" onclick="cancelAdminReply()" class="reply-preview-close">√ó</button>
                    </div>
                    
                    <input type="text" id="messageInput" placeholder="‡¶¨‡¶æ‡¶∞‡ßç‡¶§‡¶æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®..." disabled>
                    <button id="sendButton" onclick="sendAdminMessage()" disabled>‡¶™‡¶æ‡¶†‡¶æ‡¶®</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Admin to Admin Chat Section -->
    <section id="admin-chat-section" class="content-section">
        <div class="section-header">
            <h2>üë• ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶® ‡¶ö‡ßç‡¶Ø‡¶æ‡¶ü ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ</h2>
            <p>‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶®‡¶¶‡ßá‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</p>
        </div>

        <div class="chat-container">
            <!-- Admin List -->
            <div class="chat-list">
                <div class="chat-list-header">
                    <h3>‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶® ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ</h3>
                    <span id="adminChatAdminCount" class="count-badge">0</span>
                </div>
                
                <div id="adminChatAdminList">
                    <!-- Admin items will be dynamically added here -->
                    <div class="chat-empty-state">
                        <svg fill="currentColor" viewBox="0 0 24 24" width="80" height="80">
                            <path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/>
                        </svg>
                        <h3>‡¶ï‡ßã‡¶® ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶® ‡¶®‡ßá‡¶á</h3>
                        <p>‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶®‡¶∞‡¶æ ‡¶Ø‡ßã‡¶ó ‡¶¶‡¶ø‡¶≤‡ßá ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶¶‡ßá‡¶ñ‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá</p>
                    </div>
                </div>
            </div>

            <!-- Chat Window -->
            <div class="chat-window">
                <div class="chat-header">
                    <div class="chat-header-info">
                        <h3 id="adminChatHeaderName">‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶® ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</h3>
                        <div class="chat-header-nid" id="adminChatHeaderRole"></div>
                    </div>
                    <span class="chat-status" id="adminChatStatus" style="display: none;">‡¶Ö‡¶®‡¶≤‡¶æ‡¶á‡¶®</span>
                </div>

                <div class="chat-messages" id="adminChatMessagesContainer">
                    <div class="chat-empty-state">
                        <svg fill="currentColor" viewBox="0 0 24 24">
                            <path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 9h12v2H6V9zm8 5H6v-2h8v2zm4-6H6V6h12v2z"/>
                        </svg>
                        <h3>‡¶ï‡¶•‡ßã‡¶™‡¶ï‡¶•‡¶® ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®</h3>
                        <p>‡¶¨‡¶æ‡¶Æ‡¶¶‡¶ø‡¶ï ‡¶•‡ßá‡¶ï‡ßá ‡¶è‡¶ï‡¶ú‡¶® ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶® ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</p>
                    </div>
                </div>

                <!-- Typing Indicator -->
                <div id="adminChatTypingIndicator" class="typing-indicator" style="display: none;">
                    <span class="typing-dots">
                        <span></span><span></span><span></span>
                    </span>
                    <span class="typing-text">‡¶ü‡¶æ‡¶á‡¶™ ‡¶ï‡¶∞‡¶õ‡ßá...</span>
                </div>

                <div class="chat-input" style="position: relative;">
                    <!-- Reply Preview -->
                    <div id="adminChatReplyPreview" class="reply-preview" style="display: none; position: absolute; top: -60px; left: 14px; right: 14px;">
                        <div class="reply-preview-content">
                            <div class="reply-preview-label">‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶¶‡¶ø‡¶ö‡ßç‡¶õ‡ßá‡¶®</div>
                            <div class="reply-preview-text" id="adminChatReplyText"></div>
                        </div>
                        <button type="button" onclick="cancelAdminChatReply()" class="reply-preview-close">√ó</button>
                    </div>
                    
                    <input type="text" id="adminChatMessageInput" placeholder="‡¶¨‡¶æ‡¶∞‡ßç‡¶§‡¶æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®..." disabled>
                    <button id="adminChatSendBtn" disabled>‡¶™‡¶æ‡¶†‡¶æ‡¶®</button>
                </div>
            </div>
        </div>
    </section>

             <section id="settings-section" class="content-section">
                <div class="section-header">
                    <h2>‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏</h2>
                    <p>‡¶™‡ßç‡¶∞‡¶∂‡¶æ‡¶∏‡¶ï ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶ì ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏</p>
                </div>

                <div class="settings-grid">
                    <!-- Admin Information Card -->
                    <div class="card admin-info-card">
                        <div class="card-header-settings">
                            <div class="card-icon">
                                <svg viewBox="0 0 24 24" fill="currentColor" width="24" height="24">
                                    <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                                </svg>
                            </div>
                            <h3>‡¶™‡ßç‡¶∞‡¶∂‡¶æ‡¶∏‡¶ï ‡¶§‡¶•‡ßç‡¶Ø</h3>
                        </div>
                        <div class="info-grid" id="admin-info-container">
                            <!-- Admin info will be loaded dynamically -->
                        </div>
                    </div>

                    <!-- Security Settings Card -->
                    <div class="card security-card">
                        <div class="card-header-settings">
                            <div class="card-icon">
                                <svg viewBox="0 0 24 24" fill="currentColor" width="24" height="24">
                                    <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"/>
                                </svg>
                            </div>
                            <h3>‡¶®‡¶ø‡¶∞‡¶æ‡¶™‡¶§‡ßç‡¶§‡¶æ ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏</h3>
                        </div>
                        <div class="security-actions">
                            <button class="btn btn-outline-primary btn-security" onclick="togglePasswordChange()">
                                <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20">
                                    <path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/>
                                </svg>
                                ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®
                            </button>
                            <p class="security-hint">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶∏‡ßÅ‡¶∞‡¶ï‡ßç‡¶∑‡¶ø‡¶§ ‡¶∞‡¶æ‡¶ñ‡¶§‡ßá ‡¶®‡¶ø‡¶Ø‡¶º‡¶Æ‡¶ø‡¶§ ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</p>
                        </div>
                    </div>

                    <!-- Create Admin Card (Superadmin Only) -->
                    <div class="card create-admin-card" id="createAdminCard" style="display: none;">
                        <div class="card-header-settings">
                            <div class="card-icon">
                                <svg viewBox="0 0 24 24" fill="currentColor" width="24" height="24">
                                    <path d="M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-9-2V7H4v3H1v2h3v3h2v-3h3v-2H6zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                                </svg>
                            </div>
                            <h3>‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡ßç‡¶∞‡¶∂‡¶æ‡¶∏‡¶ï ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®</h3>
                        </div>
                        <form id="createAdminForm" class="create-admin-form">
                            <div class="form-group">
                                <label for="newAdminUsername">‡¶™‡ßç‡¶∞‡¶∂‡¶æ‡¶∏‡¶ï ‡¶Ü‡¶á‡¶°‡¶ø *</label>
                                <input type="text" id="newAdminUsername" class="form-control" placeholder="‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶£: ADMIN-2026-002" required>
                            </div>
                            <div class="form-group">
                                <label for="newAdminEmail">‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ *</label>
                                <input type="email" id="newAdminEmail" class="form-control" placeholder="admin@example.com" required>
                            </div>
                            <div class="form-group">
                                <label for="newAdminPassword">‡¶™‡ßç‡¶∞‡¶æ‡¶•‡¶Æ‡¶ø‡¶ï ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° *</label>
                                <input type="text" id="newAdminPassword" class="form-control" placeholder="‡¶ï‡¶Æ‡¶™‡¶ï‡ßç‡¶∑‡ßá ‡ß¨ ‡¶Ö‡¶ï‡ßç‡¶∑‡¶∞" required minlength="6">
                                <small class="form-hint">‡¶è‡¶á ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶™‡ßç‡¶∞‡¶∂‡¶æ‡¶∏‡¶ï‡ßá‡¶∞ ‡¶á‡¶Æ‡ßá‡¶á‡¶≤‡ßá ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶π‡¶¨‡ßá</small>
                            </div>
                            <button type="submit" class="btn btn-primary btn-block" id="createAdminBtn">
                                ‡¶™‡ßç‡¶∞‡¶∂‡¶æ‡¶∏‡¶ï ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®
                            </button>
                        </form>
                    </div>

                    <!-- Admin List (Superadmin Only) -->
                    <div class="card admin-list-card" id="adminListCard" style="display: none;">
                        <div class="card-header-settings">
                            <div class="card-icon">
                                <svg viewBox="0 0 24 24" fill="currentColor" width="24" height="24">
                                    <path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/>
                                </svg>
                            </div>
                            <h3>‡¶™‡ßç‡¶∞‡¶∂‡¶æ‡¶∏‡¶ï ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ</h3>
                        </div>
                        <div id="adminListContainer" class="admin-list-container">
                            <!-- Admin list will be loaded here -->
                        </div>
                    </div>
                </div>

                <!-- Password Change Form (Hidden by default) -->
                <div id="passwordChangeContainer" class="password-change-container" style="display: none;">
                    <div class="card password-change-card">
                        <div class="card-header-settings">
                            <div class="card-icon">
                                <svg viewBox="0 0 24 24" fill="currentColor" width="24" height="24">
                                    <path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/>
                                </svg>
                            </div>
                            <h3>‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®</h3>
                            <button class="btn-close-password" onclick="togglePasswordChange()" title="‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßÅ‡¶®">
                                <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20">
                                    <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                                </svg>
                            </button>
                        </div>
                        <form id="changePasswordForm">
                            <div class="form-group">
                                <label for="currentPassword">
                                    <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
                                        <path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6z"/>
                                    </svg>
                                    ‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° *
                                </label>
                                <input type="password" id="currentPassword" class="form-control" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®" required>
                            </div>
                            <div class="form-group">
                                <label for="newPassword">
                                    <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
                                        <path d="M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM18 20H6V10h12v10z"/>
                                    </svg>
                                    ‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° *
                                </label>
                                <input type="password" id="newPassword" class="form-control" placeholder="‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶® (‡¶ï‡¶Æ‡¶™‡¶ï‡ßç‡¶∑‡ßá ‡ß¨ ‡¶Ö‡¶ï‡ßç‡¶∑‡¶∞)" required>
                            </div>
                            <div class="form-group">
                                <label for="confirmNewPassword">
                                    <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
                                        <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm-2 16l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z"/>
                                    </svg>
                                    ‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶® *
                                </label>
                                <input type="password" id="confirmNewPassword" class="form-control" placeholder="‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶™‡ßÅ‡¶®‡¶∞‡¶æ‡¶Ø‡¶º ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®" required>
                            </div>
                            <div class="form-actions">
                                <button type="button" class="btn btn-secondary" onclick="togglePasswordChange()">‡¶¨‡¶æ‡¶§‡¶ø‡¶≤ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
                                <button type="submit" class="btn btn-primary">‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</button>
                            </div>
                        </form>
                    </div>
                </div>
            </section>
        </main>
    </div>

    
    <div id="candidateModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>‡¶™‡ßç‡¶∞‡¶æ‡¶∞‡ßç‡¶•‡ßÄ‡¶∞ ‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§ ‡¶§‡¶•‡ßç‡¶Ø</h2>
                <span class="close-modal" onclick="closeCandidateModal()">&times;</span>
            </div>
            <div class="modal-body" id="candidateModalBody">
                
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeCandidateModal()">‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßÅ‡¶®</button>
            </div>
        </div>
    </div>

    <script src="assets/js/api-config.js"></script>
    <script src="assets/js/common.js"></script>
    <script src="assets/js/admin-backend-data.js"></script>
    <script src="assets/js/admin-candidates.js"></script>
    <script src="assets/js/admin-notices.js"></script>
    <script src="assets/js/admin.js"></script>
    <script src="assets/js/admin_to_citizen.js"></script>
    <script src="assets/js/admin_admin_chat.js"></script>
    <script src="assets/js/admin-complaints.js"></script>
    
    <!-- jsPDF for PDF generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    
    <script>
        // Export results as PDF (using dummy data from HTML)
        function exportResults() {
            try {
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();
                
                // Set font
                doc.setFont('helvetica');
                
                // Header Background
                doc.setFillColor(248, 249, 250);
                doc.rect(0, 0, 210, 50, 'F');
                
                // Top border line (green)
                doc.setFillColor(34, 139, 34);
                doc.rect(0, 0, 210, 3, 'F');
                
                // Load and add logo
                const logo = new Image();
                logo.src = 'assets/images/election_commision_white_bg.png';
                logo.onload = function() {
                    // Add logo (centered at top)
                    doc.addImage(logo, 'PNG', 15, 8, 25, 25);
                    
                    // Bangladesh Election Commission Header
                    doc.setFontSize(18);
                    doc.setFont('helvetica', 'bold');
                    doc.setTextColor(34, 139, 34);
                    doc.text('Bangladesh Election Commission', 105, 18, { align: 'center' });
                    
                    doc.setFontSize(14);
                    doc.setTextColor(0, 0, 0);
                    doc.setFont('helvetica', 'normal');
                    doc.text('Nirapodh Vote - Secure Electronic Voting System', 105, 26, { align: 'center' });
                    
                    // Divider line
                    doc.setDrawColor(34, 139, 34);
                    doc.setLineWidth(1);
                    doc.line(20, 37, 190, 37);
                    
                    // Official seal/badge
                    doc.setFontSize(10);
                    doc.setTextColor(100, 100, 100);
                    doc.text('Official Document', 105, 43, { align: 'center' });
                    
                    // Main Title
                    doc.setFontSize(20);
                    doc.setFont('helvetica', 'bold');
                    doc.setTextColor(0, 0, 0);
                    doc.text('Election Results Report', 105, 60, { align: 'center' });
                    
                    // Subtitle
                    doc.setFontSize(14);
                    doc.setFont('helvetica', 'normal');
                    doc.text('Dhaka-1 Constituency Election', 105, 68, { align: 'center' });
                    
                    // Line separator
                    doc.setDrawColor(200, 200, 200);
                    doc.setLineWidth(0.5);
                    doc.line(20, 73, 190, 73);
                    
                    // Summary section
                    doc.setFontSize(13);
                    doc.setFont('helvetica', 'bold');
                    doc.setTextColor(34, 139, 34);
                    doc.text('Election Summary', 20, 83);
                    
                    // Summary box
                    doc.setDrawColor(34, 139, 34);
                    doc.setLineWidth(0.5);
                    doc.rect(20, 87, 170, 28);
                    
                    doc.setFontSize(11);
                    doc.setFont('helvetica', 'normal');
                    doc.setTextColor(0, 0, 0);
                    doc.text('Total Registered Voters:', 25, 95);
                    doc.setFont('helvetica', 'bold');
                    doc.text('50,000', 85, 95);
                    
                    doc.setFont('helvetica', 'normal');
                    doc.text('Total Votes Cast:', 25, 102);
                    doc.setFont('helvetica', 'bold');
                    doc.text('45,234', 85, 102);
                    
                    doc.setFont('helvetica', 'normal');
                    doc.text('Voter Turnout:', 25, 109);
                    doc.setFont('helvetica', 'bold');
                    doc.setTextColor(34, 139, 34);
                    doc.text('90.47%', 85, 109);
                    
                    doc.setTextColor(0, 0, 0);
                    doc.setFont('helvetica', 'normal');
                    doc.text('Date & Time:', 110, 95);
                    doc.setFont('helvetica', 'bold');
                    doc.text(new Date().toLocaleDateString('en-US', { 
                        year: 'numeric', 
                        month: 'short', 
                        day: 'numeric' 
                    }) + ' ' + new Date().toLocaleTimeString('en-US', {
                        hour: '2-digit',
                        minute: '2-digit'
                    }), 110, 102);
                    
                    // Results section
                    doc.setFontSize(13);
                    doc.setFont('helvetica', 'bold');
                    doc.setTextColor(34, 139, 34);
                    doc.text('Candidate Results', 20, 127);
                    
                    // Table header
                    doc.setFillColor(34, 139, 34);
                    doc.rect(20, 131, 170, 10, 'F');
                    
                    doc.setFontSize(10);
                    doc.setFont('helvetica', 'bold');
                    doc.setTextColor(255, 255, 255);
                    doc.text('Rank', 25, 138);
                    doc.text('Candidate Name', 45, 138);
                    doc.text('Party', 95, 138);
                    doc.text('Votes', 135, 138);
                    doc.text('Percentage', 160, 138);
                    
                    // Candidate 1 (Winner) - with light green background
                    let yPos = 151;
                    doc.setFillColor(232, 245, 233);
                    doc.rect(20, yPos - 7, 170, 10, 'F');
                    
                    doc.setTextColor(0, 0, 0);
                    doc.setFontSize(10);
                    doc.setFont('helvetica', 'normal');
                    doc.text('1', 25, yPos);
                    doc.setFont('helvetica', 'bold');
                    doc.text('Moh. Karim', 45, yPos);
                    doc.setFont('helvetica', 'normal');
                    doc.text('National Citizen Party', 95, yPos);
                    doc.text('25,450', 135, yPos);
                    doc.text('56.25%', 160, yPos);
                    
                    // Winner badge
                    doc.setFillColor(46, 204, 113);
                    doc.setTextColor(255, 255, 255);
                    doc.setFont('helvetica', 'bold');
                    doc.setFontSize(8);
                    doc.rect(180, yPos - 4, 10, 6, 'F');
                    doc.text('W', 182, yPos);
                    
                    // Separator line
                    doc.setDrawColor(200, 200, 200);
                    doc.setLineWidth(0.3);
                    doc.line(20, yPos + 3, 190, yPos + 3);
                    
                    // Candidate 2
                    yPos += 12;
                    doc.setTextColor(0, 0, 0);
                    doc.setFontSize(10);
                    doc.setFont('helvetica', 'normal');
                    doc.text('2', 25, yPos);
                    doc.text('Moh. Rahim', 45, yPos);
                    doc.text('BNP', 95, yPos);
                    doc.text('19,784', 135, yPos);
                    doc.text('43.75%', 160, yPos);
                    
                    // Winner declaration box
                    yPos += 20;
                    doc.setFillColor(240, 248, 255);
                    doc.setDrawColor(34, 139, 34);
                    doc.setLineWidth(1.5);
                    doc.roundedRect(20, yPos, 170, 35, 3, 3, 'FD');
                    
                    doc.setFontSize(11);
                    doc.setFont('helvetica', 'bold');
                    doc.setTextColor(34, 139, 34);
                    doc.text('OFFICIAL WINNER', 25, yPos + 12);
                    
                    doc.setFontSize(16);
                    doc.setTextColor(0, 0, 0);
                    doc.text('Moh. Karim', 25, yPos + 22);
                    
                    doc.setFontSize(10);
                    doc.setFont('helvetica', 'normal');
                    doc.setTextColor(80, 80, 80);
                    doc.text('National Citizen Party | Votes: 25,450 (56.25%)', 25, yPos + 29);
                    
                    // Verification section
                    yPos += 50;
                    doc.setFontSize(10);
                    doc.setFont('helvetica', 'bold');
                    doc.setTextColor(34, 139, 34);
                    doc.text('Verification Details', 20, yPos);
                    
                    doc.setFontSize(9);
                    doc.setFont('helvetica', 'normal');
                    doc.setTextColor(80, 80, 80);
                    doc.text('Document ID: ' + 'BEC-' + new Date().getTime().toString().substr(-8), 20, yPos + 7);
                    doc.text('Generated By: Bangladesh Election Commission', 20, yPos + 14);
                    doc.text('Verification Portal: https://nirapodh-vote.gov.bd/verify', 20, yPos + 21);
                    
                    // Footer with green border
                    doc.setFillColor(34, 139, 34);
                    doc.rect(0, 285, 210, 3, 'F');
                    
                    doc.setFontSize(8);
                    doc.setTextColor(100, 100, 100);
                    doc.text('This is an official election result document generated by NirapodhVote System.', 105, 277, { align: 'center' });
                    doc.text('¬© ' + new Date().getFullYear() + ' Bangladesh Election Commission. All rights reserved.', 105, 282, { align: 'center' });
                    
                    // Generate timestamp filename
                    const timestamp = new Date().getTime();
                    const filename = `election-results-${timestamp}.pdf`;
                    
                    // Save PDF
                    doc.save(filename);
                    
                    showSuccessMessage('PDF ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá');
                };
                
                // Trigger image loading - handle error case
                logo.onerror = function() {
                    console.error('Failed to load logo');
                    showErrorMessage('PDF ‡¶§‡ßà‡¶∞‡¶ø‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá');
                };
                
            } catch (error) {
                console.error('PDF generation error:', error);
                showErrorMessage('PDF ‡¶§‡ßà‡¶∞‡¶ø‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá');
            }
        }
        
        // Results management functions are now in admin-backend-data.js
    </script>
</body>
</html>